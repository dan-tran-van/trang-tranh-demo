{% extends "base_generic.html" %}
{% load i18n %}
{% load static %}
{% get_current_language as LANGUAGE_CODE %}

{% block stylesheets %}
    {% if LANGUAGE_CODE == 'ja' %}
        <link rel="stylesheet" href="{% static "css/index/index-jp.css" %}">
    {% else %}
        <link rel="stylesheet" href="{% static "css/index/index.css" %}">
    {% endif %}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cherry+Bomb+One&display=swap" rel="stylesheet">
{% endblock stylesheets %}
{% block javascripts %}{% endblock javascripts %}

{% block content %}
    {% block naviagtion %}
        <nav>
            <div class="nav__logo">
                <img src="{% static "images/icons/svgs/trang-tranh-logo.svg" %}" alt="Logo">
                <span class='cherry-bomb-one-regular' class="logo__brand-name">Trang tranh</span>
            </div>
       </nav>
    {% endblock naviagtion %}

    {% block main %}
       <main>
            <div class="main__nav-reserved-space"></div>
            <div class="main__update">
                {% for chapter in updated_chapters %}
                    {% if chapter.comic.default_language == LANGUAGE_CODE %}
                        <div class="update__chapter">
                            <div class="chapter__comic-cover">
                                <img src="{{ chapter.comic.vertical_cover.url }}" alt="Comic cover">
                            </div>
                            <div class="chapter__at-glance">
                                <div class="at-glance__title">
                                    {{ chapter.comic.title }}
                                </div>
                                <div class="at-glance__chapter-number">
                                    {{ chapter.number }}
                                </div>
                                <div class="at-glance__authors">
                                    {{ chapter.comic.display_authors }}
                                </div>
                            </div>
                        </div>
                    {% elif chapter.comic.default_language != LANGUAGE_CODE and chapter.chaptertranslation_set.all %}
                        {% for translation in chapter.chaptertranslation_set.all %}
                            {% if translation.comic_translation.language == LANGUAGE_CODE and translation.is_valid %}
                                <div class="update__chapter">
                                    <div class="chapter__comic-cover">
                                        <img src="{{ chapter.comic.vertical_cover.url }}" alt="Comic cover">
                                    </div>
                                    <div class="chapter__at-glance">
                                        <div class="at-glance__title">
                                            {{ translation.comic_translation.title }}
                                        </div>
                                        <div class="at-glance__chapter-number">
                                            {{ chapter.number }}
                                        </div>
                                        <div class="at-glance__authors">
                                            {{ translation.comic_translation.display_authors }}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                {% endfor %}
            </div>
            <div class="main__query-reserved-space"></div>
       </main>
    {% endblock main %}
    {% block query %}
        <div class="query">
            <form action="">
                <input type="search">
            </form>
        </div>
    {% endblock query %}
{% endblock content %}
